module Main {

import Std.Ops


struct Foo {
    value: Int
}

instance Index[Foo, Int] {
    type Output = Int

    fn index(&self, index: Int) -> &Int {
        assert(index == 0);
        &self.value
    }
}

fn main() {
    let mut f : Foo = Foo(42);
    assert(f.index(0) == 42);
    assert(f[0] == 42);
}

}