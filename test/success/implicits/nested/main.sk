module Main {

implicit myImplicit: Int

fn foo() {
    assert(myImplicit == 42);
}

fn foo2() {
    assert(myImplicit == 43);
}

fn main() {
    let counter = 42;
    let counter2 = 43;
    with myImplicit = counter {
        foo();
        with myImplicit = counter2 {
            foo2();
        }
        foo();
    }
}

}
