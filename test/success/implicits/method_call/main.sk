module Main {

struct Foo {
    value: Int

    fn myMethod(&self) {
        println("Value ${self.value}");
    }
}

implicit mut myImplicit: Foo

fn doit() {
    myImplicit.myMethod();
}

fn main() {
    let mut f = Foo(42);
    with myImplicit = f {
        doit();
    }
}

}
