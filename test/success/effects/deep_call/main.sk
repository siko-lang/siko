module Main {

pub effect Bar {
    fn bar()
}

fn foo() {
    println("Hello from foo");
}

fn someFunc() {
    someOther();
}

fn someOther() {
   andAThirdOne();
}

fn andAThirdOne() {
    bar();
}

fn main() {
    with bar = foo {
        bar();
        someFunc();
    }
    foo();
}

}
