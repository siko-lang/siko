module Main {

import Coroutine

fn simple(first: Int): co(Int) -> Int {
    yield first;
    yield 2;
    return 3;
}

fn main() {
    let c : co(Int) -> Int = co simple(5);
    let (c, res1) = resume(c);
    assert(res1.getYielded() == 5);
    let (c, res2) = resume(c);
    assert(res2.getYielded() == 2);
    let (c, res3) = resume(c);
    assert(res3.getReturned() == 3);
    let (c, res4) = resume(c);
    assert(res4.isCompleted());
}

}