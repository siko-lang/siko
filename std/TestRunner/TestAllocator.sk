module TestAllocator {

import Allocator
import NativePtr
import Libc.StdLib

pub implicit mut allocCount: U64
pub implicit mut deallocCount: U64

@unsafe
pub fn leakTestAllocate(size: U64) -> void* {
    allocCount += 1.toU64();
    Libc.StdLib.malloc(size)
}

@unsafe
pub fn leakTestDeallocate(ptr: void*) {
    deallocCount += 1.toU64();
    Libc.StdLib.free(ptr);
}

}
